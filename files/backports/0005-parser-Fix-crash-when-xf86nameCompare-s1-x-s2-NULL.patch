From 8c609764004560081bad23ac14e7d3975e83ce6b Mon Sep 17 00:00:00 2001
From: Adam Jackson <ajax@redhat.com>
Date: Mon, 23 Jan 2017 11:31:36 -0500
Subject: [PATCH 05/47] parser: Fix crash when xf86nameCompare(s1 = x, s2 =
 NULL)

Signed-off-by: Adam Jackson <ajax@redhat.com>
(cherry picked from commit f1f865e909090406841a9b9416ea6259a75c2086)
---
 hw/xfree86/parser/scan.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/hw/xfree86/parser/scan.c b/hw/xfree86/parser/scan.c
index 81a454b23..3356224ce 100644
--- a/hw/xfree86/parser/scan.c
+++ b/hw/xfree86/parser/scan.c
@@ -1046,6 +1046,8 @@ xf86nameCompare(const char *s1, const char *s2)
             return 0;
         else
             return 1;
+    } else if (!s2 || *s2 == 0) {
+        return -1;
     }
 
     while (*s1 == '_' || *s1 == ' ' || *s1 == '\t')
-- 
2.14.2

